<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flip to Match ‚Äì Hard</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{
      font-family:Arial,sans-serif;
      background-image: url(./neon.jpg);
      min-height:100vh;
      padding:20px;
      background-size: cover;
      background-repeat: no-repeat;
      background-attachment: fixed;
    }
    .container{
      display:grid;
      grid-template-columns:280px 1fr;
      gap:20px;
      margin:0 auto;
      min-height:93vh;
      padding-top:40px;
    }
    .sidebar{
      background: transparent;
      border-radius:12px;
      padding:20px;
      display:flex;
      flex-direction:column;
      gap:15px;
      color:#fff;
    }
    #search{
      background: linear-gradient(45deg, #5b0d0d, transparent);
      border: 2px solid white;
      padding:15px;
      border-radius:8px;
      font-size:16px;
      font-weight:bold;
      cursor:pointer;
    }
    .btn-primary{
      color:#d00909;
      letter-spacing:2px;
      padding:20px;
      font-size:22px;
      border:none;
      border-radius:8px;
      background:black;
    }
    .info{
      background: linear-gradient(45deg, #6d1212, #2f4090);
      border:2px solid rgb(255, 255, 255);
      padding:12px 15px;
      border-radius:8px;
      font-size:14px;
      color: #fff;
    }
    .button-sm{
      background: linear-gradient(45deg, #5b0f0f, transparent);
      border:3px solid rgb(0, 0, 0);
      padding:10px;
      border-radius:8px;
      color:#f0e5e5;
      font-size:17px;
      cursor:pointer;
    }
    .spacer{flex:1}
    .icons{
      display:flex;
      justify-content:space-between;
      gap:10px;
    }
    .icon{
      width:45px;height:45px;
      background: linear-gradient(45deg, #811324, #0c4072db);
      border-radius:8px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:24px;
      cursor:pointer;
      border: 2px solid black;
    }
    .game-area{
      background: transparent;
      border-radius:20px;
      padding:3px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .card-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
      gap:38px;
      width:100%;
      max-width:716px;
    }
    .card{
      perspective:1000px;
      aspect-ratio:4/3;
      width:100%;
      cursor:pointer;
    }
    .card:hover{transform:scale(1.05)}
    .card-inner{
      width:110%;height:110%;
      position:relative;
      border-radius:15px;
      transform-style:preserve-3d;
      transition:transform .5s;
    }
    .card.flipped .card-inner{transform:rotateY(180deg)}
    .card-front,.card-back{
      position:absolute;inset:0;
      border-radius:15px;
      backface-visibility:hidden;
      display:flex;justify-content:center;align-items:center;
      font-size:40px;font-weight:bold;
    }
    .card-front{
      background: linear-gradient(180deg, #f53434, #090c38);
      color:#fff;
    }
    .card-back{
      background:#fff;
      border:3px solid #1a5568;
      transform:rotateY(180deg);
      color:#1a5568;
    }

    #popup{
      position:fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background:rgba(0,0,0,.7);
      backdrop-filter: blur(5px);
      z-index:20;
    }
    #popupBox{
      background: linear-gradient(135deg, #ff006e 0%, #1a1a1a 50%, #ff006e 100%);
      padding: 3rem 2.5rem;
      border-radius: 20px;
      text-align:center;
      position: relative;
      box-shadow: 0 20px 60px rgba(0,0,0,0.5);
      border: 3px solid rgba(255,255,255,0.3);
      animation: victoryBounce 0.6s ease;
      min-width: 350px;
    }
    #popupBox::before{
      content: 'üéâ';
      position: absolute;
      top: -30px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 60px;
      animation: celebrateFloat 2s ease-in-out infinite;
    }
    #popupBox::after{
      content: '';
      position: absolute;
      inset: -5px;
      background: linear-gradient(45deg, #ff006e, #ff4d94, #ff006e);
      border-radius: 20px;
      z-index: -1;
      opacity: 0.6;
      filter: blur(10px);
      animation: victoryGlow 1.5s ease-in-out infinite;
    }
    #popupText{
      color: #fff;
      font-size: 1.6rem;
      font-weight: bold;
      margin-bottom: 1.5rem;
      text-shadow: 2px 2px 8px rgba(0,0,0,0.3);
      letter-spacing: 1px;
    }
    #popupBox button{
      margin-top: 10px;
      padding: 15px 35px;
      border: none;
      border-radius: 50px;
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: #fff;
      cursor: pointer;
      font-size: 1.2rem;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 2px;
      box-shadow: 0 8px 20px rgba(245, 87, 108, 0.4);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    #popupBox button::before{
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255,255,255,0.3);
      transform: translate(-50%, -50%);
      transition: width 0.5s, height 0.5s;
    }
    #popupBox button:hover::before{
      width: 300px;
      height: 300px;
    }
    #popupBox button:hover{
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 12px 30px rgba(245, 87, 108, 0.6);
    }

    #suggestion{
      background:#eee;
      color:black;
      display:none;
      padding:10px;
      border-radius:8px;
      margin-top:-10px;
      font-weight:bold;
      cursor:pointer;
    }

    #setting-popup{
      display:none;
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.85);
      justify-content:center;
      align-items:center;
      z-index:10;
      backdrop-filter: blur(8px);
    }

    #setting-popup .box{
      background: linear-gradient(145deg, #1a0a1a, #2d1a2d);
      border: 4px solid #ff6b9d;
      padding: 2.5rem 3rem;
      border-radius: 15px;
      text-align: center;
      width: 350px;
      box-shadow: 0 0 40px rgba(255, 107, 157, 0.6), inset 0 0 30px rgba(0,0,0,0.7);
      animation: settingsPop .3s ease;
      position: relative;
    }

    #setting-popup .box::before{
      content: '';
      position: absolute;
      inset: -3px;
      background: linear-gradient(45deg, #ff6b9d, #ff8eb3, #ff5c8a, #ff6b9d);
      border-radius: 15px;
      z-index: -1;
      opacity: 0.4;
      animation: settingsBorderGlow 2s linear infinite;
      background-size: 300% 300%;
    }

    #setting-popup h3{
      color: #fff;
      font-size: 1.8rem;
      text-transform: uppercase;
      letter-spacing: 3px;
      margin-bottom: 2rem;
      text-shadow: 0 2px 10px rgba(255, 107, 157, 0.8), 0 0 20px rgba(255, 107, 157, 0.5);
      font-weight: bold;
    }

    #setting-popup label{
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      color: #fff;
      font-size: 1.2rem;
      margin-bottom: 1.2rem;
      font-weight: 600;
      cursor: pointer;
    }

    #setting-popup input[type="checkbox"]{
      width: 24px;
      height: 24px;
      cursor: pointer;
      accent-color: #ff6b9d;
    }

    #setting-popup button{
      background: linear-gradient(145deg, #ff6b9d, #ff5c8a);
      color: #fff;
      border: 3px solid #ff8eb3;
      padding: 0.9rem 2.8rem;
      font-size: 1.3rem;
      text-transform: uppercase;
      letter-spacing: 2px;
      box-shadow: 0 6px 20px rgba(255, 107, 157, 0.5);
      transition: all 0.3s ease;
      cursor: pointer;
      font-weight: bold;
      border-radius: 8px;
      margin-top: 1rem;
    }

    #setting-popup button:hover{
      background: linear-gradient(145deg, #ff8eb3, #ff6b9d);
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(255, 107, 157, 0.7);
    }

    #gameover-popup{
      display:none;
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.85);
      justify-content:center;
      align-items:center;
      z-index:10;
      backdrop-filter: blur(8px);
    }
    #gameover-popup .box{
      background: linear-gradient(145deg, #1a0a1a, #2d1a2d);
      border: 4px solid #ff6b9d;
      padding: 2.5rem 3rem;
      border-radius: 15px;
      text-align: center;
      width: 350px;
      box-shadow: 0 0 40px rgba(255, 107, 157, 0.6), inset 0 0 30px rgba(0,0,0,0.7);
      animation: settingsPop .3s ease;
      position: relative;
    }
    #gameover-popup .box::before{
      content: '';
      position: absolute;
      inset: -3px;
      background: linear-gradient(45deg, #ff6b9d, #ff8eb3, #ff5c8a, #ff6b9d);
      border-radius: 15px;
      z-index: -1;
      opacity: 0.4;
      animation: settingsBorderGlow 2s linear infinite;
      background-size: 300% 300%;
    }
    #gameover-popup h3{
      color: #fff;
      font-size: 1.8rem;
      text-transform: uppercase;
      letter-spacing: 3px;
      margin-bottom: 1.5rem;
      text-shadow: 0 2px 10px rgba(255, 107, 157, 0.8), 0 0 20px rgba(255, 107, 157, 0.5);
      font-weight: bold;
    }
    #gameover-popup .gameover-message{
      color: #fff;
      font-size: 1.3rem;
      margin-bottom: 1.5rem;
      font-weight: 600;
    }
    #gameover-popup button{
      background: linear-gradient(145deg, #ff6b9d, #ff5c8a);
      color: #fff;
      border: 3px solid #ff8eb3;
      padding: 0.9rem 2.8rem;
      font-size: 1.3rem;
      text-transform: uppercase;
      letter-spacing: 2px;
      box-shadow: 0 6px 20px rgba(255, 107, 157, 0.5);
      transition: all 0.3s ease;
      cursor: pointer;
      font-weight: bold;
      border-radius: 8px;
    }
    #gameover-popup button:hover{
      background: linear-gradient(145deg, #ff8eb3, #ff6b9d);
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(255, 107, 157, 0.7);
    }

    #key-help{
      position:fixed;top:12px;left:50%;transform:translateX(-50%) translateY(-8px);
      background:rgba(0,0,0,.78);color:#fff;padding:8px 12px;border-radius:8px;
      font-size:13px;text-align:center;opacity:0;pointer-events:none;
      transition:.3s;z-index:9999;
    }
    #key-help.show{opacity:1;transform:translateX(-50%)}

    .key-btn{
      position:fixed;
      top:14px;
      right:14px;
      width:48px;height:48px;
      background:linear-gradient(45deg,#650e0e,#15295e);
      border:3px solid #000;border-radius:8px;
      display:flex;align-items:center;justify-content:center;
      color:#fff;font-size:20px;cursor:pointer;z-index:9999;
    }

    @keyframes settingsPop{
      0%{transform: scale(0.5) rotate(-5deg); opacity: 0;}
      60%{transform: scale(1.05) rotate(2deg);}
      100%{transform: scale(1) rotate(0deg); opacity: 1;}
    }
    @keyframes settingsBorderGlow{
      0%{background-position: 0% 50%;}
      50%{background-position: 100% 50%;}
      100%{background-position: 0% 50%;}
    }
    @keyframes victoryBounce{
      0%{transform: scale(0) rotate(-10deg); opacity: 0;}
      50%{transform: scale(1.1) rotate(5deg);}
      100%{transform: scale(1) rotate(0deg); opacity: 1;}
    }
    @keyframes victoryGlow{
      0%, 100%{opacity: 0.4; transform: scale(0.95);}
      50%{opacity: 0.8; transform: scale(1.05);}
    }
    @keyframes celebrateFloat{
      0%, 100%{transform: translateX(-50%) translateY(0) rotate(0deg);}
      50%{transform: translateX(-50%) translateY(-10px) rotate(15deg);}
    }

    /* üÜï ADDED: Media query for mobile and tablet - hide keyboard button and adjust layout */
    @media(max-width:768px){
      /* üÜï ADDED: Hide keyboard button on mobile/tablet */
      .key-btn{
        display: none;
      }
      
      .container{
        grid-template-columns:1fr;
        grid-template-rows:auto 1fr;
        /* üÜï ADDED: Remove padding to maximize screen space */
        padding-top: 10px;
      }
      
      /* üÜï ADDED: Move icons below the game area */
      .sidebar{
        order: 2;
      }
      
      .game-area{
        /* üÜï ADDED: Reduce padding to keep cards inside screen */
        padding:10px;
        order: 1;
      }
      
      .card-grid{
        /* üÜï ADDED: Reduce gap to keep all cards visible on small screens */
        gap:10px;
        /* üÜï ADDED: Ensure grid fits 4 columns on mobile */
        grid-template-columns: repeat(4, 1fr);
      }
      
      /* üÜï ADDED: Adjust card size for mobile */
      .card-inner{
        width: 100%;
        height: 100%;
      }
      
      /* üÜï ADDED: Reduce font size on cards for mobile */
      .card-front, .card-back{
        font-size: 24px;
      }
    }
    
    /* üÜï ADDED: Extra small mobile screens (320px, 375px) */
    @media(max-width:475px){
      .container{
        /* üÜï ADDED: Further reduce padding */
        padding: 10px;
      }
      
      .card-grid{
        /* üÜï ADDED: Smaller gap for very small screens */
        gap: 6px;
      }
      
      /* üÜï ADDED: Even smaller font for tiny screens */
      .card-front, .card-back{
        font-size: 20px;
      }
      
      .game-area{
        /* üÜï ADDED: Minimal padding for maximum card space */
        padding: 5px;
      }
    }
  </style>
</head>
<body>
  <!-- ‚≠ê Floating Key Bindings Button -->
  <button class="key-btn" onclick="showKeyHelp()">‚å®</button>

  <!-- KEY HELP POPUP -->
  <div id="key-help">
    <strong>KEY BINDINGS</strong><br>
    S = Settings ‚Ä¢ C = Close<br>
    D = Difficulty ‚Ä¢ Enter = Start
  </div>

  <div class="container">
    <div class="sidebar">
      <button class="btn-primary">FLIP TO MATCH</button>
      <input type="text" id="search" placeholder="search your favourite theme...">
      <div id="suggestion"></div>

      <div class="info">Timer: <span id="timer">40</span>s</div>
      <div class="info">Score: <span id="score">0</span></div>
      <div class="info">Best: <span id="bestScore">0</span></div>

      <button id="reset" class="button-sm" onclick="reset()">Reset</button>

      <div class="spacer"></div>
      <!-- üîπ Icons will move below cards on mobile due to order: 2 -->
      <div class="icons">
        <div class="icon" onclick="changePage()">üè†</div>
        <div class="icon" onclick="openset();playClick()">‚öô</div>
      </div>
    </div>

    <div class="game-area">
      <div class="card-grid">
        <!-- 16 cards -->
        <div class="card"><div class="card-inner"><div class="card-front">?</div><div class="card-back"></div></div></div>
        <div class="card"><div class="card-inner"><div class="card-front">?</div><div class="card-back"></div></div></div>
        <div class="card"><div class="card-inner"><div class="card-front">?</div><div class="card-back"></div></div></div>
        <div class="card"><div class="card-inner"><div class="card-front">?</div><div class="card-back"></div></div></div>

        <div class="card"><div class="card-inner"><div class="card-front">?</div><div class="card-back"></div></div></div>
        <div class="card"><div class="card-inner"><div class="card-front">?</div><div class="card-back"></div></div></div>
        <div class="card"><div class="card-inner"><div class="card-front">?</div><div class="card-back"></div></div></div>
        <div class="card"><div class="card-inner"><div class="card-front">?</div><div class="card-back"></div></div></div>

        <div class="card"><div class="card-inner"><div class="card-front">?</div><div class="card-back"></div></div></div>
        <div class="card"><div class="card-inner"><div class="card-front">?</div><div class="card-back"></div></div></div>
        <div class="card"><div class="card-inner"><div class="card-front">?</div><div class="card-back"></div></div></div>
        <div class="card"><div class="card-inner"><div class="card-front">?</div><div class="card-back"></div></div></div>

        <div class="card"><div class="card-inner"><div class="card-front">?</div><div class="card-back"></div></div></div>
        <div class="card"><div class="card-inner"><div class="card-front">?</div><div class="card-back"></div></div></div>
        <div class="card"><div class="card-inner"><div class="card-front">?</div><div class="card-back"></div></div></div>
        <div class="card"><div class="card-inner"><div class="card-front">?</div><div class="card-back"></div></div></div>
      </div>
    </div>
  </div>

  <div id="popup">
    <div id="popupBox">
      <p id="popupText"></p>
      <button id="nextBtn" onclick="next()">Home page</button>
    </div>
  </div>

  <div id="setting-popup">
    <div class="box">
      <h3>Settings</h3>
      <label>
        <input type="checkbox" id="ss">
        <span>Sound Effects</span>
      </label>
      <label>
        <input type="checkbox" id="music-checkbox">
        <span>Background Music</span>
      </label>
      <button onclick="closeset() ; playClick()">CLOSE</button>
    </div>
  </div>

  <div id="gameover-popup">
    <div class="box">
      <h3>Time's Up!</h3>
      <p class="gameover-message">Final Score: <span id="final-score">0</span></p>
      <button onclick="closeGameOver(); reset();">TRY AGAIN</button>
    </div>
  </div>

  <!-- background music -->
  <audio id="bg-music" loop>
    <source src="./back.mp3" type="audio/mpeg">
  </audio>

  <!-- clickSound -->
  <audio id="clickSound">
    <source src="./click.mp3" type="audio/mpeg">
  </audio>

  <script>
        function openset(){
      document.getElementById("setting-popup").style.display ="flex";
    }
    function closeset(){
      document.getElementById("setting-popup").style.display ="none";
    }
    function changePage(){ 
      playClick()
      setTimeout(function(){ window.location.href="popup.html";},350)
    }

    /* CARD REFERENCES */
    const cards   = [...document.querySelectorAll(".card")];
    const backs   = [...document.querySelectorAll(".card-back")];

    const scoreEl = document.getElementById("score");
    const timerEl = document.getElementById("timer");
    const bestEl  = document.getElementById("bestScore");
    const popup   = document.getElementById("popup");
    const popupText = document.getElementById("popupText");
    const nextBtn = document.getElementById("nextBtn");
    const resetBtn= document.getElementById("reset");
    const BEST_KEY = "flip_best_hard"

    /* Base card values ‚Äì 8 pairs */
    const baseVals=["A","B","C","D","E","F","G","H","A","B","C","D","E","F","G","H"];

    /* Game State */
    let first=null,
        second=null,
        lock=false,
        score=0,
        matched=0,
        timeLimit=40,
        time=timeLimit,
        timerId=null,
        timerStarted=false;

    /* Best score from localStorage (for hard level) */
    let bestScore = 0;

    function updateBest(){
      if(score>bestScore){
        bestScore= score;
        localStorage.setItem(BEST_KEY,bestScore)
      }
      bestEl.innerHTML=bestScore
    }

    function loadBest(){
      const b = parseInt(localStorage.getItem(BEST_KEY)|| "0",10)
      if(isNaN(b)){
        bestScore=0
      }
      else{
        bestScore = b 
      }
      bestEl.innerHTML = bestScore
    }

    /* Shuffle and assign letters */
    function shuffleCards(){
      const vals=[...baseVals];
      for(let i=vals.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [vals[i],vals[j]]=[vals[j],vals[i]];
      }
      backs.forEach((b,i)=>b.textContent=vals[i]);
    }

    /* Start / reset game */
    function startGame(){
      clearInterval(timerId);
      timerStarted=false;

      score=0;
      matched=0;
      time=timeLimit;
      first=second=null;
      lock=false;

      scoreEl.textContent=score;
      timerEl.textContent=time;

      shuffleCards();

      cards.forEach(c=>{
        c.classList.remove("flipped");
        c.onclick=flip;
      });
    }

    /* UPDATED: use Game Over popup instead of alert on time-up */
    function startTimer(){
      timerId=setInterval(()=>{
        time--;
        timerEl.textContent=time;
        if(time<=0){
          clearInterval(timerId);
          lock=true;
          // UPDATED: replaced alert + redirect with styled Game Over popup
          showGameOver();
        }
      },1000);
    }

    /* Show Game Over popup */
    function showGameOver(){
      document.getElementById("final-score").textContent = score;
      document.getElementById("gameover-popup").style.display = "flex";
    }

    /* Close Game Over popup and allow retry */
    function closeGameOver(){
      playClick();
      document.getElementById("gameover-popup").style.display = "none";
    }

    /* Card flip handler */
    function flip(){
      if(lock || this.classList.contains("flipped")) return;

      if(!timerStarted){
        timerStarted=true;
        startTimer();
      }

      this.classList.add("flipped");

      if(!first){
        first=this;
        return;
      }

      second=this;
      lock=true;
      checkMatch();
    }

    function val(card){
      return card.querySelector(".card-back").textContent.trim();
    }

    /* Check for match */
    function checkMatch(){
      if(val(first)===val(second)){
        score+=10;
        matched+=2;
        first.onclick=second.onclick=null;
        resetTurn();
        if(matched===cards.length) win();
      }else{
        score=Math.max(0,score-5);
        setTimeout(()=>{
          first.classList.remove("flipped");
          second.classList.remove("flipped");
          resetTurn();
        },600);
      }
      scoreEl.textContent=score;
    }

    function resetTurn(){
      first=null;
      second=null;
      lock=false;
    }

    /* Win popup + best score update */
    function win(){
      clearInterval(timerId);
      lock=true;
      updateBest()
      popupText.textContent="Level complete! Score: "+score;
      popup.style.display="flex";
    }

    function next(){ playClick()
  setTimeout(function(){
    popup.style.display = "none";
    window.location.href = "popup.html";
  },350)}

function reset(){
  playClick();
  popup.style.display = "none";
  startGame();
};
    /* Start first game */
    startGame();
    loadBest();

    //theme selection 
    const themeSets = {
      animal: ["üê∂","üê±","ü¶ä","üê∞","üêº","üê∫","ü¶Å","üêÆ","üê∂","üê±","ü¶ä","üê∞","üêº","üê∫","ü¶Å","üêÆ"],
      fruit:  ["üçé","üçâ","üçå","üçê","üçá","üçí","üçë","üçç","üçé","üçâ","üçå","üçê","üçá","üçí","üçë","üçç"],
      emoji:  ["üòÄ","üòÇ","üòç","üòá","üòé","ü§Ø","üò¥","ü§ë","üòÄ","üòÇ","üòç","üòá","üòé","ü§Ø","üò¥","ü§ë"],
      val : ["A","B","C","D","E","F","G","H","A","B","C","D","E","F","G","H"]
    }
    const suggestionBox = document.getElementById("suggestion");
    const search = document.getElementById("search");

    // apply theme function (copies values into baseVals)
    function applyTheme(themeicons){
      const t = themeSets[themeicons];

      // no loops used
      baseVals[0] = t[0];
      baseVals[1] = t[1];
      baseVals[2] = t[2];
      baseVals[3] = t[3];
      baseVals[4] = t[4];
      baseVals[5] = t[5];
      baseVals[6] = t[6];
      baseVals[7] = t[7];
      baseVals[8] = t[8];
      baseVals[9] = t[9];
      baseVals[10] = t[10];
      baseVals[11] = t[11];
      baseVals[12] = t[12];
      baseVals[13] = t[13];
      baseVals[14] = t[14];
      baseVals[15] = t[15];

      suggestionBox.style.display = "none";
      startGame(); // reload cards with theme
    }

    function handleThemeSearch(){
      const text = search.value.toLowerCase();
      suggestionBox.innerHTML = "";

      if(text === ""){
        suggestionBox.style.display = "";
        return;
      }

      if(text === "a" || text === "an" || text === "ani" || text === "anima" || text === "animal"){
        suggestionBox.style.display = "block";
        suggestionBox.textContent = "animal";
        suggestionBox.addEventListener("click",function(){applyTheme("animal")})
        return;
      }

      if(text === "f" || text === "fr" || text === "fru" ||text ==="frui"| text === "fruit"){
        suggestionBox.style.display = "block";
        suggestionBox.textContent = "fruit";
        suggestionBox.addEventListener("click",function(){applyTheme("fruit")}) ;
        return;
      }
      
      if(text === "e" || text === "em" || text === "emo" || text === "emoji"){
        suggestionBox.style.display = "block";
        suggestionBox.textContent = "emoji";
        suggestionBox.addEventListener("click",function(){applyTheme("emoji")}) 
        return;
      };
      if(text === "d" || text === "def" || text === "defau" || text === "default"){
        suggestionBox.style.display = "block";
        suggestionBox.textContent = "default";
        suggestionBox.addEventListener("click",function(){applyTheme("val")}) 
        return;
      };

      suggestionBox.style.display = "none";
    }

    // attach search handler
    search.addEventListener("input", handleThemeSearch);

    // sound
    let music = document.getElementById("bg-music");
    let musicCheckbox = document.getElementById("music-checkbox");

    musicCheckbox.addEventListener('change', function(){
      if (musicCheckbox.checked) {
        music.play();   // start music
      } else {
        music.pause();  // stop music
      }
    })

    const clickSound =document.getElementById("clickSound")
    const ss = document.getElementById("ss")
    function playClick(){
      if(ss.checked){
        clickSound.play()
      }
      else { 
        clickSound.pause()
      }
    }

    const help = document.getElementById("key-help");

    function showKeyHelp(){
      help.classList.add("show");
      setTimeout(()=>help.classList.remove("show"),3000);
    }

    window.onload = () => {
      help.classList.add("show");
      setTimeout(() => help.classList.remove("show"), 5000);
    };
    
  //   -----------------------------------------
  //  KEY BINDINGS SYSTEM
  //  ----------------------------------------- */


document.addEventListener("keydown", function(e){

  if(e.key === "h" || e.key === "H"){
    changePage();
    playClick();
  }

  if(e.key === "s" || e.key === "S"){
    playClick();
    setTimeout(function(){ openset()},150)
   }

  if(e.key === "c" || e.key === "C"){
    playClick()
    setTimeout(function(){closeset()},150) 
  }
  if(e.key === "r" || e.key === "R"){

    setTimeout(function(){reset()},150) 
  }
  if(e.key === "Enter"){

    if (popup.style.display === "flex") {
    setTimeout(() => { next(); }, 150);
  }
  }
  
});


</script>
</body>
</html>